<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <title>Events: Task 1</title>
    <style>
      form {
        display: flex;
        flex-direction: column;
        gap: 10px;
        width: 500px;
      }
      #responseMessage {
        padding-top: 15px;
      }
      .success {
        color: green;
      }
      .error {
        color: red;
      }
    </style>
    <link rel="stylesheet" href="../styles.css" />
  </head>

  <body>
    <h1>Send Email</h1>
    <form id="emailForm" class="emailForm" novalidate>
      <label for="to">Email:</label>
      <input type="email" id="to" name="to" required />

      <label for="subject">Subject:</label>
      <input type="text" id="subject" name="subject" required />

      <label for="message">Message:</label>
      <textarea id="message" name="message" rows="5" required></textarea>

      <button type="submit">Send</button>

      <div id="responseMessage" class="message"></div>
    </form>
    <script>
      const form = document.getElementById("emailForm");
      const responseMessage = document.getElementById("responseMessage");

      form.addEventListener("submit", function (submit) {
        event.preventDefault();

        const to = document.getElementById("to").value;
        const subject = document.getElementById("subject").value;
        const message = document.getElementById("message").value;

        fetch("https://fake-mail-api.laravel.cloud/api/send", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({
            to: to,
            subject: subject,
            message: message,
          }),
        })
          .then(function (response) {
            return response.json();
          })
          .then(function (data) {
            console.log(data);
          })
          .catch(function (error) {
            console.error("Error:", error);
          });
      });
    </script>
  </body>
</html>
